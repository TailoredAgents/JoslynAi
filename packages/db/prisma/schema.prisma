generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

// Minimal schema for Phase 1 vertical slice

model Children {
  id        String   @id @default(uuid()) @db.Uuid
  org_id    String?  @db.Uuid
  name      String
  dob       DateTime?
  created_at DateTime @default(now())

  @@map("children")
}

model Documents {
  id          String   @id @default(uuid()) @db.Uuid
  child_id    String   @db.Uuid
  type        String
  storage_uri String
  sha256      String
  doc_tags    Json
  created_at  DateTime @default(now())

  @@map("documents")
}

model DocSpan {
  id           String   @id @default(uuid()) @db.Uuid
  document_id  String   @db.Uuid
  page         Int
  bbox         String?
  text         String
  created_at   DateTime @default(now())

  @@map("doc_spans")
}

model IepExtract {
  id           String   @id @default(uuid()) @db.Uuid
  document_id  String   @unique @db.Uuid
  data         Json
  created_at   DateTime @default(now())

  @@map("iep_extract")
}
